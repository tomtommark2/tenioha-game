<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英単語学習クリッカー</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6c5ce7">
    <link rel="icon" href="icon-512.png" type="image/png">
    <link rel="apple-touch-icon" href="icon-512.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Poppins:wght@400;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Trial Lock Screen -->
    <!-- TRIAL_START -->
    <div id="trialOverlay" class="trial-overlay">
        <div class="trial-content">
            <div class="trial-title">⏳ 本日のプレイ時間は終了しました</div>
            <div class="trial-message">
                無料版は1日10分までプレイ可能です。<br>
                制限を解除して、無制限に楽しみましょう！
            </div>

            <button onclick="openPurchaseModal();"
                style="margin-bottom: 20px; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 18px; font-weight: bold; cursor: pointer; width: 100%; box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4); display: flex; flex-direction: column; align-items: center; gap: 5px;">
                <span>💎 制限を解除</span>
                <span style="font-size: 12px; opacity: 0.9;">(買い切り¥1,800)</span>
            </button>

            <!-- Only Close Btn -->
            <button onclick="document.getElementById('trialOverlay').style.display = 'none';"
                style="margin-top: 10px; background: transparent; border: none; color: #999; text-decoration: underline; cursor: pointer;">閉じる</button>
        </div>
    </div>
    <!-- TRIAL_END -->

    <!-- WELCOME_LP_START -->
    <div id="welcomeOverlay" class="welcome-overlay" style="display: none;">
        <div class="welcome-content">
            <div class="welcome-icon">🎮</div>
            <h1 class="welcome-title">英単語クリッカー</h1>
            <p class="welcome-desc">
                スキマ時間で楽しく覚える<br>
                英単語学習ゲーム
            </p>

            <div id="inviteMessage" class="invite-message" style="display: none;">
                🎁 招待コード<br><span id="welcomeInviteCode" style="color: #fdcb6e; font-weight: bold;"></span> が適用されました！
            </div>

            <div class="welcome-actions">
                <button id="installAppBtn" class="install-btn" onclick="triggerInstall()">
                    📲 アプリをインストールして開始<br>
                    <span style="font-size: 11px; opacity: 0.9; margin-top: 5px; line-height: 1.4;">
                        💎 プレミアム権限もらえる！<br>
                        🚀 オフライン対応
                    </span>
                </button>
                <div class="divider">または</div>
                <button id="browserPlayBtn" class="browser-btn" onclick="dismissWelcome()">
                    ブラウザでそのまま遊ぶ
                </button>
                <div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 5px;">
                    <input type="checkbox" id="dontShowWelcomeAgain"
                        style="width: 16px; height: 16px; cursor: pointer;">
                    <label for="dontShowWelcomeAgain"
                        style="font-size: 13px; color: rgba(255,255,255,0.8); cursor: pointer;">次回はこのページを表示しない</label>
                </div>
            </div>
            <div style="margin-top:20px; font-size: 10px; color: #aaa;">
                ※インストールは無料です
            </div>
        </div>
    </div>
    <!-- WELCOME_LP_END -->

    <!-- SHARE_MODAL_START -->
    <div id="shareModal" class="trial-overlay">
        <div class="trial-content" style="max-width: 450px;">
            <div class="trial-title">📱 友達に教える</div>
            <div class="trial-message" style="margin-bottom: 20px;">
                友達と一緒に英単語を覚えよう！
            </div>

            <div id="shareMainContent">
                <!-- Main Action Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <button class="unlock-btn" onclick="shareApp()"
                        style="background: #00b894; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100px; padding: 10px;">
                        <span style="font-size: 24px; margin-bottom: 5px;">📤</span>
                        <span style="font-size: 14px;">SNSでシェア</span>
                    </button>
                    <button class="unlock-btn" onclick="toggleQRCode()"
                        style="background: #6c5ce7; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100px; padding: 10px;">
                        <span style="font-size: 24px; margin-bottom: 5px;">📱</span>
                        <span style="font-size: 14px;">QRコード表示</span>
                    </button>
                </div>

                <div class="invite-message"
                    style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; font-size: 13px; text-align: left; margin-bottom: 10px; color: #dfe6e9;">
                    <strong style="color: #fab1a0;">URL:</strong> <br>
                    <span id="shareUrlDisplay"
                        style="user-select: all; color: #74b9ff; word-break: break-all;">https://tenioha-eng.github.io/vocab-clicker/</span>
                </div>
            </div>

            <!-- QR Code Section (Hidden by Default) -->
            <div id="qrSection"
                style="display: none; flex-direction: column; align-items: center; justify-content: center; background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <div id="qrcode"></div>
                <p style="color: #333; margin-top: 10px; font-size: 12px; font-weight: bold;">
                    スキャンしてゲームを開始
                </p>
                <button onclick="toggleQRCode()"
                    style="margin-top: 15px; background: #b2bec3; border: none; padding: 8px 20px; border-radius: 50px; color: white; cursor: pointer;">
                    戻る
                </button>
            </div>

            <button
                onclick="document.getElementById('shareModal').style.display = 'none'; document.getElementById('qrSection').style.display='none'; document.getElementById('shareMainContent').style.display='block';"
                style="margin-top: 10px; background: transparent; border: none; color: #999; text-decoration: underline; cursor: pointer;">閉じる</button>
        </div>
    </div>
    <!-- SHARE_MODAL_END -->

    <div class="container" style="position: relative;">

        <!-- Other Menu Button (Top Left) -->
        <div class="simple-switch-container" style="position: absolute; top: 15px; left: 15px; z-index: 200;">
            <button id="otherMenuBtn" onclick="toggleOtherMenu()"
                style="background: white; border: 1px solid #ddd; width: 40px; height: 40px; border-radius: 12px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; padding: 0;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3px; width: 22px; height: 22px;">
                    <div style="background: #555; border-radius: 2px;"></div>
                    <div style="background: #555; border-radius: 2px;"></div>
                    <div style="background: #555; border-radius: 2px;"></div>
                    <div style="background: #555; border-radius: 2px;"></div>
                </div>
            </button>
            <div style="font-size: 10px; color: #666; font-weight: bold; text-align: center; margin-top: 3px;">その他</div>
        </div>

        <!-- Other Menu Dropdown (Hidden) -->
        <div id="otherMenuDropdown"
            style="display: none; position: absolute; top: 60px; left: 15px; background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); width: 200px; z-index: 201; overflow: hidden; border: 1px solid #eee;">

            <!-- Simple Mode -->
            <div onclick="openSimpleModeModal(); toggleOtherMenu();"
                style="padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: background 0.1s;"
                onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='white'">
                <span style="font-size: 20px;">📱</span>
                <span style="font-size: 14px; font-weight: bold; color: #444;">シンプル表示</span>
            </div>

            <!-- Learning Log (New Modal) -->
            <div onclick="openLearningLogModal(); toggleOtherMenu();"
                style="padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: background 0.1s;"
                onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='white'">
                <span style="font-size: 20px;">📊</span>
                <span style="font-size: 14px; font-weight: bold; color: #444;">学習記録</span>
            </div>

            <!-- Ranking -->
            <div onclick="openLeaderboard(); toggleOtherMenu();"
                style="padding: 15px; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: background 0.1s;"
                onmouseover="this.style.background='#f9f9f9'" onmouseout="this.style.background='white'">
                <span style="font-size: 20px;">👑</span>
                <span style="font-size: 14px; font-weight: bold; color: #444;">ランキング</span>
            </div>

            <!-- Account (Profile) Removed -->
        </div>

        <!-- Top Right Controls (Upload) -->
        <div class="header-controls" style="display: flex; align-items: center; gap: 10px;">
            <div id="trialTimerDisplay" class="trial-timer">残り 10:00</div>

            <!-- Auto/Random Toggles (Moved Here) -->
            <div class="auto-mode-container" id="autoModeToggle" style="margin-right: 5px;">
                <div class="auto-checkbox" id="autoCheckbox"></div>
                <div class="auto-label">
                    <span>オート</span>
                </div>
            </div>
            <div class="auto-mode-container" id="randomToggle" style="margin-right: 5px;">
                <div class="auto-checkbox checked" id="randomCheckbox"></div>
                <div class="auto-label">
                    <span>ランダム</span>
                </div>
            </div>

            <!-- Profile Icon (Restored) -->
            <div id="headerProfileIcon" onclick="toggleProfileModal()"
                style="width: 40px; height: 40px; border-radius: 50%; background: #eee; cursor: pointer; overflow: hidden; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center;">
                <span id="headerProfileInitials" style="font-weight: bold; color: #888; font-size: 14px;">👤</span>
                <img id="headerProfileImage" src=""
                    style="width: 100%; height: 100%; object-fit: cover; display: none;">
            </div>


            <button class="icon-btn" id="helpBtn" title="遊び方">❓</button>
        </div>


        <div class="level-selector" id="levelContainer">
            <button class="level-btn" data-level="junior">🔰 中学</button>
            <button class="level-btn active" data-level="basic">📚 基礎</button>
            <button class="level-btn" data-level="daily">🎬 標準</button>
            <button class="level-btn" data-level="exam1">📖 受験</button>
            <button class="wordbook-opener-btn" id="wordbookBtn"
                onclick="document.getElementById('wordbookModal').style.display='flex'"
                style="background: linear-gradient(135deg, #6c5ce7, #a29bfe);">
                <span class="pc-only">📘</span><span> 単語帳</span>
            </button>
        </div>



        <div class="header">
            <div class="rpg-inline">
                <div id="enemySlime" class="pixel-art anim-slime" style="opacity: 0;"></div>

                <!-- Gold Display (Above Level) -->
                <div class="char-level-display" style="top: -42px; color: #f1c40f;">
                    💰 <span id="points">0</span>
                </div>

                <div class="char-level-display">Lv.<span class="js-vocab-level-value">1</span></div>

                <!-- NEW: Compact Progress Bar (90px) -->
                <div class="mini-progress-container">
                    <div class="mini-title js-current-title">見習い</div>
                    <div class="mini-bar-bg">
                        <div class="mini-bar-fill js-progress-bar-fill" style="width: 0%;"></div>
                    </div>
                </div>

                <div id="heroCharacter" class="pixel-art anim-idle"></div>
            </div>
            <div class="header-controls-wrapper">

                <!-- Wrapper for Mobile Layout: Toggles (Left) + Progress (Right) -->


                <!-- Right Aligned Controls: Toggles + Mode Buttons -->
                <div class="right-controls-container"
                    style="display: flex; flex-direction: column; width: auto; align-self: flex-end; margin: 0; padding: 0; box-sizing: border-box; align-items: stretch;">

                    <span class="random-notice" id="randomNotice"
                        style="display: none; margin-bottom: 5px;">ランダム出題中</span>

                    <!-- Toggles (Moved Here) -->
                    <!-- Toggles Moved to Header -->

                    <!-- Mode Buttons -->
                    <div class="mode-buttons">
                        <button class="mode-btn unlearned active" data-mode="unlearned" id="unlearnedBtn">
                            <span>未学習</span>
                            <span class="mode-count" id="unlearnedCount">0</span>
                        </button>
                        <button class="mode-btn learned" data-mode="learned" id="learnedBtn">
                            <span>✅ 得意</span>
                            <span class="mode-count" id="learnedCount">0</span>
                        </button>
                        <button class="mode-btn perfect" data-mode="perfect" id="perfectBtn">
                            <span>🏆 完璧</span>
                            <span class="mode-count" id="perfectCount">0</span>
                        </button>
                        <button class="mode-btn weak" data-mode="weak" id="weakBtn">
                            <span>📚 苦手</span>
                            <span class="mode-count" id="weakCount">0</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="pos-filter-container">
            <div class="filter-label">フィルタ:</div>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="名" checked> 名詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="動" checked> 動詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="形" checked> 形容詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="副" checked> 副詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="助" checked> 助動詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="前" checked> 前置詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="接" checked> 接続詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="代" checked> 代名詞
            </label>
            <label class="pos-checkbox-item">
                <input type="checkbox" class="pos-filter" data-pos="other" checked> その他
            </label>
        </div>

        <div id="addWordsContainer" style="text-align: center; display: none; margin-bottom: 20px;">
            <button class="add-words-btn" id="addWordsBtn">➕ 次のセットを追加（レベルアップ）</button>
        </div>

        <div class="main-content">
            <div class="cards-section">
                <div class="cards-area" id="cardsArea">
                    <div class="card vocab-card" id="vocabCard">
                        <div class="card-label">英単語カード</div>
                        <div class="card-content" id="vocabWord">ファイルを読み込んでください</div>
                    </div>

                    <div class="card meaning-card" id="meaningCard">
                        <div class="card-label">意味カード</div>
                        <div class="card-front">
                            <div class="card-content">❓</div>
                        </div>
                        <div class="card-back">
                            <div class="card-content" id="meaningText">意味</div>
                        </div>
                    </div>
                </div>

                <div class="example-area" id="exampleArea">
                    <button class="speaker-btn" id="speakerBtn">🔊</button>
                    <div class="example-text">
                        <div class="example-label">例文</div>
                        <div class="example-sentence" id="exampleSentence">ファイルを読み込んでください</div>
                    </div>
                    <button class="undo-btn" id="undoBtn" onclick="undoLastAction()" disabled>↩️ 戻る</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import External Vocabulary Data -->
    <script src="data/vocabulary.js?v=2"></script>
    <script src="js/game_logic.js"></script>

    <!-- Simple Mode Category Selection Modal -->
    <div id="simpleModeModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10001; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 30px; border-radius: 12px; max-width: 90%; width: 400px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.3);">
            <h2 style="margin-top: 0; color: #333; margin-bottom: 20px;">📱 シンプルモード設定</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">出題範囲を選択してスタート！</p>

            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button onclick="startSimpleMode('junior')" class="simple-select-btn"
                    style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-weight: bold; color: #333;">🔰
                    中学レベル</button>
                <button onclick="startSimpleMode('basic')" class="simple-select-btn"
                    style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-weight: bold; color: #333;">📚
                    基礎レベル</button>
                <button onclick="startSimpleMode('daily')" class="simple-select-btn"
                    style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-weight: bold; color: #333;">🎬
                    標準レベル</button>
                <button onclick="startSimpleMode('exam1')" class="simple-select-btn"
                    style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-weight: bold; color: #333;">📖
                    受験レベル</button>
                <!-- Wordbook Option -->
                <button onclick="startSimpleMode('wordbook')" class="simple-select-btn"
                    style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; cursor: pointer; font-weight: bold;">📘
                    単語帳</button>
            </div>

            <button onclick="document.getElementById('simpleModeModal').style.display='none'"
                style="margin-top: 20px; background: none; border: none; color: #999; text-decoration: underline; cursor: pointer;">キャンセル</button>
        </div>
    </div>

    <!-- Simple Mode Exit Button (Hidden by default) -->
    <button id="exitSimpleModeBtn" onclick="exitSimpleMode()"
        style="display: none; position: fixed; top: 15px; right: 15px; z-index: 300; background: #333; color: white; border: none; padding: 5px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; opacity: 0.8;">
        ✕ 通常モードへ戻る
    </button>

    <!-- Force Update Modal (Blocking) -->
    <div id="forceUpdateModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.95); z-index: 2147483647; justify-content: center; align-items: center; pointer-events: auto;">
        <div class="modal-content"
            style="background: white; padding: 30px; border-radius: 15px; max-width: 90%; width: 350px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.5);">
            <div style="font-size: 50px; margin-bottom: 20px;">⚠️</div>
            <h2 style="color: #e74c3c; margin: 0 0 15px 0;">アップデートのお願い</h2>
            <p style="color: #555; font-size: 14px; line-height: 1.6; margin-bottom: 25px;">
                こちらのバージョンで不具合が発見されたため、<br>
                アップデートをお願いいたします。
            </p>
            <button onclick="forceUpdateApp()"
                style="width: 100%; padding: 15px; background: #e74c3c; color: white; border: none; border-radius: 50px; font-size: 16px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);">
                🔄 今すぐアップデート
            </button>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10000; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 450px; text-align: left; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative;">
            <button id="closeHelpModal" onclick="document.getElementById('helpModal').style.display='none'"
                style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888;">&times;</button>
            <!-- Version Display (Top Left) -->
            <div style="position: absolute; top: 15px; left: 15px;">
                <div style="font-size: 11px; color: #ccc;" id="helpVersionDisplay"></div>
            </div>

            <!-- Share Button (Top Right, styled) -->
            <button onclick="document.getElementById('helpModal').style.display='none'; window.openShareModal()"
                style="position: absolute; top: 15px; right: 50px; background: #6c5ce7; border: none; font-size: 12px; cursor: pointer; padding: 5px 12px; border-radius: 20px; color: white; font-weight: bold; display: flex; align-items: center; gap: 5px; box-shadow: 0 2px 5px rgba(108, 92, 231, 0.3);">
                🔗 シェア
            </button>

            <h2
                style="margin-top: 0; margin-bottom: 20px; color: #333; text-align: center; font-size: 18px; font-weight: bold;">
                ヘルプ
            </h2>

            <div class="help-list-container" style="text-align: left; padding: 0 10px;">
                <div onclick="forceUpdateApp()"
                    style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px; border: 1px solid #ddd; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: background 0.2s;">
                    <span style="font-size: 20px;">🔄</span>
                    <div>
                        <div style="font-weight: bold; font-size: 13px; color: #333;">最新版への更新</div>
                        <div style="font-size: 11px; color: #555;">ここをタップして更新を確認・実行</div>
                    </div>
                </div>

                <div onclick="window.installApp()"
                    style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px; border: 1px solid #ddd; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: background 0.2s;">
                    <span style="font-size: 20px;">📲</span>
                    <div>
                        <div style="font-weight: bold; font-size: 13px; color: #333;">アプリインストール</div>
                        <div style="font-size: 11px; color: #555;">タップしてインストール (プレミア権限付与)</div>
                    </div>
                </div>

                <div onclick="document.getElementById('helpModal').style.display='none'; openPurchaseModal();"
                    style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px; border: 1px solid #ddd; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: background 0.2s;">
                    <span style="font-size: 20px;">💎</span>
                    <div>
                        <div style="font-weight: bold; font-size: 13px; color: #333;">制限の解除</div>
                        <div style="font-size: 11px; color: #555;">タップして購入ページを表示</div>
                    </div>
                </div>

                <div onclick="location.href='mailto:tenioha.eng@gmail.com'"
                    style="margin-bottom: 5px; display: flex; align-items: center; gap: 10px; border: 1px solid #ddd; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: background 0.2s;">
                    <span style="font-size: 20px;">📧</span>
                    <div>
                        <div style="font-weight: bold; font-size: 13px; color: #333;">お問い合わせ（質問・バグ報告）</div>
                        <div style="font-size: 11px; color: #555;">タップしてメールを送信</div>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <a href="https://note.com/tenioha_eng/n/n5918d72138bd?sub_rt=share_pb" target="_blank"
                    style="display: inline-block; background: #00b894; color: white; padding: 12px 25px; text-decoration: none; border-radius: 25px; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s;">
                    📚 詳しい使い方はこちら (Note)
                </a>
            </div>
        </div>
    </div>

    <!-- UPDATE_PROMPT_MODAL_START -->
    <div id="updatePromptModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 20000; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 350px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
            <div style="font-size: 40px; margin-bottom: 10px;">🔄</div>
            <h3 style="margin-top: 0; color: #333; margin-bottom: 10px;">新しいバージョンがあります</h3>
            <p id="updateVersionMsg" style="color: #666; font-size: 14px; margin-bottom: 20px;">
                ランキング機能を利用するには<br>アプリの更新が必要です。
            </p>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button onclick="forceUpdateApp()"
                    style="background: #00b894; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px;">
                    更新してリロード (推奨)
                </button>
                <button onclick="document.getElementById('updatePromptModal').style.display='none'"
                    style="background: #dfe6e9; color: #636e72; border: none; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 14px;">
                    キャンセル
                </button>
            </div>
        </div>
    </div>
    <!-- UPDATE_PROMPT_MODAL_END -->

    <!-- OFFLINE_ALERT_MODAL_START -->
    <div id="offlineAlertModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 2147483647; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 12px; max-width: 85%; width: 320px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
            <div style="font-size: 40px; margin-bottom: 15px;">📡</div>
            <h3 style="margin-top: 0; color: #333; margin-bottom: 10px;">現在はオフラインです</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 20px; line-height: 1.5;">
                通信環境のある所で、<br>更新してください。
            </p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="document.getElementById('offlineAlertModal').style.display='none'"
                    style="flex: 1; padding: 12px; background: #dfe6e9; color: #636e72; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                    閉じる
                </button>
            </div>
        </div>
    </div>
    <!-- OFFLINE_ALERT_MODAL_END -->

    <div id="wordbookModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 20px; border-radius: 12px; max-width: 90%; width: 400px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h2 style="margin-top: 0; color: #333;">単語帳を選択</h2>
            <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                <button class="wordbook-item-btn" data-level="selection1900"
                    onclick="if(window.selectWordbook){selectWordbook('selection1900')}else{alert('システム読み込み中です。少々お待ち下さい。')}"
                    style="padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-size: 16px; font-weight: bold; color: #555; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <span style="font-size: 24px;">🦖</span> 厳選 1900+
                </button>
                <button class="wordbook-item-btn" data-level="selection1400"
                    onclick="if(window.selectWordbook){selectWordbook('selection1400')}else{alert('システム読み込み中です。少々お待ち下さい。')}"
                    style="padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-size: 16px; font-weight: bold; color: #555; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <span style="font-size: 24px;">🐕</span> 厳選 1400+
                </button>
                <button class="wordbook-item-btn" data-level="sys_2000"
                    onclick="if(window.selectWordbook){selectWordbook('sys_2000')}else{alert('システム読み込み中です。少々お待ち下さい。')}"
                    style="padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; cursor: pointer; font-size: 16px; font-weight: bold; color: #555; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <span style="font-size: 24px;">💻</span> システムWORDS (2077語)
                </button>
                <!-- Future wordbooks can be added here -->
            </div>
            <button id="closeWordbookModal" onclick="document.getElementById('wordbookModal').style.display='none'"
                style="margin-top: 20px; padding: 8px 20px; border: none; background: #ddd; border-radius: 5px; cursor: pointer;">閉じる</button>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10002; justify-content: center; align-items: center;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 450px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative;">
            <button onclick="closeLeaderboard()"
                style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888;">&times;</button>

            <!-- Rename Button (Top Left) -->
            <button id="renameBtn" onclick="renamePlayer()"
                style="position: absolute; top: 15px; left: 15px; background: none; border: 1px solid #ccc; border-radius: 4px; padding: 2px 8px; font-size: 11px; cursor: pointer; color: #888; display: none;">
                ✏️ 名前変更
            </button>


            <h2 style="margin-top: 0; padding-bottom: 10px; color: #f1c40f; text-shadow: 1px 1px 0px #e67e22;">
                🏆 ランキング
            </h2>

            <!-- Login Required Message (New) -->
            <div id="loginRequiredMessage" style="display: none; padding: 20px;">
                <p style="font-size: 16px; color: #555; font-weight: bold; margin-bottom: 10px;">
                    未ログインのため、閲覧不可
                </p>
                <p id="leaderboardVersionDisplay">現在のバージョン: -</p>

                <p style="font-size: 12px; color: #888; margin-bottom: 20px;">
                    ランキング機能を利用するには<br>Googleアカウントでのログインが必要です。
                </p>
                <button onclick="closeLeaderboard(); openProfileModal();"
                    style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                    ログイン画面へ移動
                </button>
            </div>

            <!-- Name Input Overlay (Initial Only) -->
            <!-- Name Input Overlay (Initial Only) -->
            <div id="nameInputParams" style="display: none; margin-bottom: 20px;">
                <p style="font-size: 14px; color: #666; margin-bottom: 10px;">ランキングに参加するには名前を登録してください</p>
                <input type="text" id="playerNameInput" placeholder="ニックネーム（８文字以内）" maxlength="8"
                    style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 70%; text-align: center;">
                <div style="margin-top: 10px;">
                    <button onclick="registerName()"
                        style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">登録して参加</button>
                    <button id="cancelRenameBtn" onclick="cancelRename()"
                        style="display: none; padding: 8px 15px; background: #ddd; color: #555; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">キャンセル</button>
                </div>
            </div>

            <!-- Tab Content -->
            <div id="leaderboardContent" style="display: none;">
                <div class="leaderboard-tabs">
                    <button class="lb-tab active" onclick="switchTab('top')">TOP 20</button>
                    <button class="lb-tab" onclick="switchTab('around')">自分の順位</button>
                </div>

                <div id="lb-loading" style="color: #999; padding: 20px;">読み込み中...</div>

                <div id="lb-list-top" class="ranking-list">
                    <!-- Dynamic Content -->
                    <div class="ranking-item">
                        <span class="rank-num top3">1</span>
                        <span class="rank-name">No Data</span>
                        <span class="rank-score">- G</span>
                    </div>
                </div>

                <div id="lb-list-around" class="ranking-list" style="display: none;">
                    <!-- Users + Neighbors -->
                </div>
            </div>
        </div>
    </div>

    <!-- Learning Log Modal (New) -->
    <div id="learningLogModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10002; justify-content: center; align-items: flex-start; padding-top: 50px; overflow-y: auto;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative; margin-bottom: 50px;">
            <button onclick="document.getElementById('learningLogModal').style.display='none'"
                style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888;">&times;</button>

            <h2 style="margin-top: 20px; color: #6c5ce7; margin-bottom: 20px;">📊 学習の記録</h2>

            <!-- New Stats Section (Velocity & Future Vision) -->
            <div style="position: relative; display: flex; gap: 10px; margin-bottom: 20px;">
                <!-- Demo Badge -->
                <div
                    style="position: absolute; top: -12px; left: 0; background: #ffeaa7; color: #d35400; font-size: 10px; padding: 2px 8px; border-radius: 10px; font-weight: bold; border: 1px solid #fdcb6e; z-index: 10;">
                    ※開発中のデモ数値です
                </div>
                <!-- Velocity Box (Left) -->
                <div
                    style="flex: 1; background: linear-gradient(135deg, #ffffff, #f8f9fa); border-radius: 12px; padding: 15px; border: 1px solid #eee; text-align: left; position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -5px; right: 5px; font-size: 30px; opacity: 0.4;">🚀</div>
                    <div style="font-size: 11px; color: #888; margin-bottom: 5px; font-weight: bold;">
                        新語習得力<br>
                        <span style="font-size:9px; font-weight:normal; opacity:0.8;">(知らない単語を覚える力)</span>
                    </div>
                    <div style="display: flex; align-items: baseline; gap: 3px;">
                        <span id="statVelocity" style="font-size: 24px; font-weight: bold; color: #2ecc71;">--</span>
                        <span style="font-size: 12px; color: #666;">語相当 / 日</span>
                    </div>
                    <!-- Breakdown -->
                    <div style="font-size: 9px; color: #aaa; margin-top: 5px;">
                        <span id="statBreakdownAttempts">苦手取り組み数: 0 回 <span style="opacity:0.6;">(÷5)</span></span>
                    </div>
                </div>

                <!-- Future Box (Right) -->
                <div
                    style="flex: 1.2; background: linear-gradient(135deg, #fff5e6, #fff); border-radius: 12px; padding: 15px; border: 1px solid #ffeaa7; text-align: left; position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -5px; right: 5px; font-size: 30px; opacity: 0.4;">🌟</div>
                    <div style="font-size: 11px; color: #e17055; margin-bottom: 5px; font-weight: bold;">1ヶ月後の習得語数 (予想)
                    </div>
                    <div id="statFutureMilestone"
                        style="font-size: 14px; font-weight: bold; color: #d35400; line-height: 1.4;">
                        --
                    </div>
                </div>
            </div>

            <!-- Graph Section -->
            <div id="learningGraphSection" style="margin-bottom: 20px;">
                <!-- Tabs -->
                <div style="display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; justify-content: center;">
                    <button onclick="updateChart('total')" class="chart-tab active" data-tab="total"
                        style="padding: 5px 10px; font-size: 12px; border: 1px solid #ddd; background: #6c5ce7; color: white; border-radius: 15px; cursor: pointer;">総合</button>
                    <button onclick="updateChart('A1')" class="chart-tab" data-tab="A1"
                        style="padding: 5px 10px; font-size: 12px; border: 1px solid #ddd; background: #f1f2f6; color: #555; border-radius: 15px; cursor: pointer;">A1</button>
                    <button onclick="updateChart('A2')" class="chart-tab" data-tab="A2"
                        style="padding: 5px 10px; font-size: 12px; border: 1px solid #ddd; background: #f1f2f6; color: #555; border-radius: 15px; cursor: pointer;">A2</button>
                    <button onclick="updateChart('B1')" class="chart-tab" data-tab="B1"
                        style="padding: 5px 10px; font-size: 12px; border: 1px solid #ddd; background: #f1f2f6; color: #555; border-radius: 15px; cursor: pointer;">B1</button>
                    <button onclick="updateChart('B2')" class="chart-tab" data-tab="B2"
                        style="padding: 5px 10px; font-size: 12px; border: 1px solid #ddd; background: #f1f2f6; color: #555; border-radius: 15px; cursor: pointer;">B2</button>
                </div>

                <!-- Canvas -->
                <div style="position: relative; height: 200px; width: 100%;">
                    <canvas id="learningChart"></canvas>
                </div>
                <div id="chartStats" style="font-size: 12px; color: #666; margin-top: 5px;">
                    <!-- Stats injected by JS -->
                </div>
            </div>

            <p style="font-size: 12px; color: #999;">
                毎日の学習データがここに蓄積され、<br>未来の成長予測が表示されます。
            </p>
        </div>
    </div>

    <!-- Purchase Modal (New) -->
    <div id="purchaseModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10003; justify-content: center; align-items: center; padding: 20px;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative;">
            <button onclick="closePurchaseModal()"
                style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888;">&times;</button>

            <h2 style="margin-top: 10px; color: #6c5ce7; margin-bottom: 20px; font-weight: bold;">💎 プレミアムプラン</h2>
            <p style="font-size: 13px; color: #666; margin-bottom: 20px; text-align: left; line-height: 1.6;">
                1日10分の制限を解除して、無制限に学習できます。<br>
                <span style="color: #e74c3c; font-weight: bold;">⚠️ログイン後の購入を強く勧めます⚠️</span><br>
                <a href="legal.html" target="_blank"
                    style="font-size: 11px; color: #999; text-decoration: underline;">特定商取引法に基づく表記</a>
            </p>

            <!-- 1. Stripe (Primary) -->
            <a id="stripePurchaseLink" href="https://buy.stripe.com/9B66oIbMidxG5M32Kl7ok01" target="_blank"
                style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 15px; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; border: none; border-radius: 8px; font-weight: bold; text-decoration: none; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3); transition: transform 0.2s;"
                onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                <span style="font-size: 20px;">💳</span>
                <span style="font-size: 16px;">買い切り版を購入 (¥1,800)</span>
            </a>
            <div style="font-size: 10px; color: #999; margin-bottom: 20px; text-align: center;">
                ※支払完了後、自動で制限が解除されます。
            </div>

            <!-- 2. Note Membership (Secondary Button) -->
            <a href="https://note.com/tenioha_eng/n/n823dfa17b5c7?sub_rt=share_pw" target="_blank"
                style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; background: white; border: 1px solid #2ecc71; color: #2ecc71; border-radius: 8px; font-weight: bold; text-decoration: none; margin-bottom: 10px; transition: background 0.2s;"
                onmouseover="this.style.background='#f0fff4'" onmouseout="this.style.background='white'">
                <span style="font-size: 18px;">🔓</span>
                <span style="font-size: 14px;">メンバーシップで解除 (初月無料)</span>
            </a>

            <!-- 3. Note Q&A (Tertiary Button) -->
            <a href="https://note.com/tenioha_eng/n/n84f2f394b674?sub_rt=share_pw" target="_blank"
                style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; background: white; border: 1px solid #95a5a6; color: #7f8c8d; border-radius: 8px; font-weight: bold; text-decoration: none; margin-bottom: 25px; transition: background 0.2s;"
                onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='white'">
                <span style="font-size: 18px;">❓</span>
                <span style="font-size: 14px;">買い切り版Q&A</span>
            </a>

            <!-- 3. Promo Code Input -->
            <div style="border-top: 1px solid #eee; padding-top: 15px;">
                <div style="font-size: 12px; color: #666; margin-bottom: 8px; text-align: left; font-weight: bold;">
                    解除コードをお持ちの方</div>
                <div style="display: flex; gap: 5px; align-items: center;">
                    <input type="text" id="purchasePromoCodeInput" placeholder="コード入力"
                        style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; background: #fafafa;">
                    <button onclick="redeemPromoCode('purchasePromoCodeInput')"
                        style="padding: 10px 15px; background: #2ecc71; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 14px;">
                        有効化
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal (Reverted / Simplified) -->
    <div id="profileModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10002; justify-content: center; align-items: flex-start; padding-top: 50px; overflow-y: auto;">
        <div class="modal-content"
            style="background: white; padding: 25px; border-radius: 15px; max-width: 90%; width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative; margin-bottom: 50px;">
            <button onclick="closeProfileModal()"
                style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888;">&times;</button>

            <h2 style="margin-top: 20px; color: #667eea; margin-bottom: 20px;">アカウント</h2>

            <!-- User Info Section -->
            <div
                style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-bottom: 20px; text-align: center;">
                <div
                    style="width: 80px; height: 80px; margin: 0 auto 10px; border-radius: 50%; background: #eee; overflow: hidden; border: 3px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center;">
                    <img id="modalProfileImage" src=""
                        style="width: 100%; height: 100%; object-fit: cover; display: none;">
                    <span id="modalProfileInitials" style="font-size: 32px;">👤</span>
                </div>
                <div id="modalUserName" style="font-weight: bold; font-size: 18px; color: #333;">ゲストユーザー</div>
                <div id="modalUserEmail" style="font-size: 12px; color: #888; margin-bottom: 10px;">未ログイン</div>

                <!-- Plan Status -->
                <div id="planStatusTag"
                    style="display: inline-block; padding: 5px 15px; background: #95a5a6; color: white; border-radius: 20px; font-size: 12px; font-weight: bold; margin-bottom: 15px;">
                    無料プラン (制限あり)
                </div>

                <!-- Promo Code (Profile) -->
                <div style="display: flex; gap: 5px; align-items: center; margin-bottom: 20px;">
                    <input type="text" id="profilePromoCodeInput" placeholder="解除コードをお持ちの方"
                        style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 13px; background: #fafafa;">
                    <button onclick="redeemPromoCode('profilePromoCodeInput')"
                        style="padding: 10px 15px; background: #2ecc71; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 13px;">
                        有効化
                    </button>
                </div>

                <!-- Link to Purchase Modal (Clean) -->
                <button id="premiumActivationSection" onclick="closeProfileModal(); openPurchaseModal();"
                    style="display: flex; align-items: center; justify-content: center; gap: 5px; width: 100%; padding: 10px; background: transparent; border: 1px solid #6c5ce7; color: #6c5ce7; border-radius: 8px; font-weight: bold; cursor: pointer; transition: background 0.2s;">
                    <span>💎 制限を解除 (購入ページへ)</span>
                </button>
            </div>

            <!-- Graph Section Removed (Moved to Learning Log Modal) -->

            <!-- Action List -->
            <div style="display: flex; flex-direction: column; gap: 10px; text-align: left;">

                <!-- Ranking Button Removed -->


                <div id="profileSyncSection"
                    style="display: none; background: #eef2ff; padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="font-size: 14px; font-weight: bold; color: #333;">☁️ データの同期</span>
                        <span id="profileLastSync" style="font-size: 11px; color: #666;">-</span>
                    </div>

                    <div style="display: flex; gap: 10px;">
                        <button onclick="forceBackup()"
                            style="flex: 1; padding: 8px; background: #6c5ce7; color: white; border: none; border-radius: 5px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px;">
                            ⬆️ 手動セーブ
                        </button>
                        <button onclick="forceRestore()"
                            style="flex: 1; padding: 8px; background: white; border: 1px solid #6c5ce7; color: #6c5ce7; border-radius: 5px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px;">
                            ⬇️ 手動ロード
                        </button>
                    </div>
                    <div style="font-size: 10px; color: #888; margin-top: 5px; text-align: center;">
                        ※端末変更時は「手動セーブ」を押して下さい。
                    </div>
                </div>

                <!-- Login / Logout Btn -->
                <button id="profileAuthBtn" onclick="handleProfileAuth()"
                    style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <img id="googleIconEntry" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                        width="18" height="18">
                    <span>Googleでログイン</span>
                </button>
                <div id="loginIncentiveText" style="font-size: 11px; color: #888; text-align: center; margin-top: 5px;">
                    データをクラウドに保存出来ます。
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/qrcode.min.js"></script>
    <script src="js/ui_manager.js?v=2.41"></script>
    <script type="module" src="js/firebase_app.js"></script>
    <div style="position: fixed; bottom: 5px; right: 5px; font-size: 10px; color: #ccc; z-index: 1000;"
        id="currentVersion">v2.41</div>
</body>

</html>